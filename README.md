# TestTask2
Моё второе тестовое задание от потенциального работодателя  
Использовал полюбившийся фреймворк Silex вкупе с шаблонизатором Twig и Doctrine DBAL для работы с базой данных.

Задание:  
Имеется система, позволяющая зарабатывать группе пользователей деньги.  
Пользователи могут получить выплату 1 и 16 числа каждого месяца.  
Так же существует понятие задержки выплаты (hold), измеряемое в двухнедельных периодах.  

Пример:
Пользователю A установлено правило оплаты biweekly, hold = 1.  
Если сегодня 16 ноября, то он должен получить все деньги, заработанные до 1 ноября(текущая дата минус холд).  
Пользователю B установлено правило оплаты biweekly, hold = 2.  
Если сегодня 16 ноября, то он должен получить все деньги, заработанные до 16 октября.  

Данные о пользователях лежат в таблице users:  
- user_id int;  
- hold_rule smallint.  

Заработанные деньги хранятся в таблице вида:  
- user_id int;  
- date date;  
- earned.  

Уже выплаченные деньги хранятся в таблице транзакций в виде:  
- user_id int;  
- paid_amount.  

Требуется:  
Написать код, который при заходе на страницу, в зависимости от даты захода, для всего списка пользователей рассчитывает:  
- сколько всего заработал пользователь;  
- сколько всего ему было выплачено;  
- сколько пользователем было заработано денег с разбивкой на 8 платежных периодов назад (по две недели каждый);  
- сколько пользователю нужно выплатить на данный момент;  
- сколько денег у пользователя на балансе;  
- сколько нужно будет выплатить пользователю в ближайший платежный день.  
